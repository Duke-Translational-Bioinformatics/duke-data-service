// Generated by CoffeeScript 1.10.0
var clone, configUtils, fs, yaml;

fs = require('fs');

yaml = require('js-yaml');

clone = require('clone');

configUtils = {};

configUtils.save = function(argsOrigin, path) {
  var args, key, value, yamlArgs;
  if (path == null) {
    path = './dredd.yml';
  }
  args = clone(argsOrigin);
  args['blueprint'] = args['_'][0];
  args['endpoint'] = args['_'][1];
  for (key in args) {
    value = args[key];
    if (key.length === 1) {
      delete args[key];
    }
  }
  delete args['$0'];
  delete args['_'];
  yamlArgs = yaml.dump(args);
  return fs.writeFileSync(path, yamlArgs);
};

configUtils.load = function(path) {
  var data, yamlData;
  if (path == null) {
    path = './dredd.yml';
  }
  yamlData = fs.readFileSync(path);
  data = yaml.safeLoad(yamlData);
  data['_'] = [data['blueprint'], data['endpoint']];
  delete data['blueprint'];
  delete data['endpoint'];
  return data;
};

configUtils.parseCustom = function(customArray) {
  var i, len, output, splitted, string;
  output = {};
  if (Array.isArray(customArray)) {
    for (i = 0, len = customArray.length; i < len; i++) {
      string = customArray[i];
      splitted = string.split(/:(.+)?/);
      output[splitted[0]] = splitted[1];
    }
  }
  return output;
};

module.exports = configUtils;
