// Generated by CoffeeScript 1.10.0
var clone, mergeSandboxedHooks;

clone = require('clone');

mergeSandboxedHooks = function(original, toMerge) {
  var base, funcArray, functions, newHooks, target, transactionName;
  newHooks = clone(original);
  for (target in toMerge) {
    functions = toMerge[target];
    if (Array.isArray(functions)) {
      newHooks[target] = newHooks[target].concat(functions);
    } else if (typeof functions === "object" && !Array.isArray(functions)) {
      for (transactionName in functions) {
        funcArray = functions[transactionName];
        if ((base = newHooks[target])[transactionName] == null) {
          base[transactionName] = [];
        }
        newHooks[target][transactionName] = newHooks[target][transactionName].concat(funcArray);
      }
    }
  }
  return newHooks;
};

module.exports = mergeSandboxedHooks;
